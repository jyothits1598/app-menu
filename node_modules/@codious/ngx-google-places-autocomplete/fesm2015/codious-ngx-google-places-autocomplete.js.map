{"version":3,"file":"codious-ngx-google-places-autocomplete.js","sources":["../../../ngx-google-places-autocomplete/lib/ngx-google-places-autocomplete.config.ts","../../../ngx-google-places-autocomplete/lib/ngx-google-places-autocomplete.control-value-accessor.ts","../../../ngx-google-places-autocomplete/lib/ngx-google-places-autocomplete.component.ts","../../../ngx-google-places-autocomplete/lib/ngx-google-places-autocomplete.pipe.ts","../../../ngx-google-places-autocomplete/lib/ngx-google-places-autocomplete.module.ts","../../../ngx-google-places-autocomplete/codious-ngx-google-places-autocomplete.ts"],"sourcesContent":["import { InjectionToken } from '@angular/core';\n\nexport const NGX_GOOGLE_PLACES_AUTOCOMPLETE_CONFIG = new InjectionToken('NGX_GOOGLE_PLACES_AUTOCOMPLETE_CONFIG');\n\nexport interface NgxGooglePlacesAutocompleteConfig {\n  key: string;\n  language: string;\n  libraries: string;\n  loadScript?: boolean;\n  options?: any;\n  region: string;\n}","import { Injector, Input, ViewChild } from '@angular/core';\nimport { AbstractControl, ControlContainer, ControlValueAccessor, FormControl, FormControlDirective } from '@angular/forms';\n\nexport class NgxGooglePlacesAutocompleteControlValueAccessor implements ControlValueAccessor {\n  @Input() public formControl: FormControl;\n  @Input() public formControlName: string;\n\n  @ViewChild(FormControlDirective, { static: true }) public formControlDirective: FormControlDirective;\n\n  constructor(private injector: Injector) {}\n\n  public get control(): AbstractControl {\n    return this.formControl || this.controlContainer.control.get(this.formControlName);\n  }\n\n  public get controlContainer(): ControlContainer {\n    return this.injector.get(ControlContainer);\n  }\n\n  public registerOnChange(fn: any): void {\n    this.formControlDirective.valueAccessor.registerOnChange(fn);\n  }\n\n  public registerOnTouched(fn: any): void {\n    this.formControlDirective.valueAccessor.registerOnTouched(fn);\n  }\n\n  public setDisabledState(isDisabled: boolean): void {\n    this.formControlDirective.valueAccessor.setDisabledState(isDisabled);\n  }\n\n  public writeValue(obj: any): void {\n    this.formControlDirective.valueAccessor.writeValue(obj);\n  }\n}","import { ChangeDetectorRef, Component, ElementRef, EventEmitter, Inject, Injector, Input, Output } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\n\nimport { NGX_GOOGLE_PLACES_AUTOCOMPLETE_CONFIG, NgxGooglePlacesAutocompleteConfig } from './ngx-google-places-autocomplete.config';\nimport { NgxGooglePlacesAutocompleteControlValueAccessor } from './ngx-google-places-autocomplete.control-value-accessor';\nimport { Prediction } from './ngx-google-places-autocomplete.models';\n\n@Component({\n  providers: [{ provide: NG_VALUE_ACCESSOR, useExisting: NgxGooglePlacesAutocompleteComponent, multi: true }],\n  selector: 'ngx-google-places-autocomplete',\n  templateUrl: './ngx-google-places-autocomplete.component.html'\n})\nexport class NgxGooglePlacesAutocompleteComponent extends NgxGooglePlacesAutocompleteControlValueAccessor {\n  private service: google.maps.places.AutocompleteService;\n\n  public index: number = -1;\n  public predictions: Prediction[] = [];\n  public show: boolean = false;\n\n  @Input() public placeholder: string = 'Enter a location';\n  @Output() public scriptLoaded: EventEmitter<boolean> = new EventEmitter<boolean>();\n\n  constructor(\n    private changeDetectorRef: ChangeDetectorRef,\n    private elementRef: ElementRef,\n    injector: Injector,\n    @Inject(NGX_GOOGLE_PLACES_AUTOCOMPLETE_CONFIG) private ngxGooglePlacesAutocompleteConfig: NgxGooglePlacesAutocompleteConfig\n  ) {\n    super(injector);\n    this.initialize().then(() => this.service = new google.maps.places.AutocompleteService());\n  }\n\n  public onBlur(): void {\n    this.reset(true);\n  }\n\n  public onClick(): void {\n    this.control.setValue(null);\n  }\n\n  public onFocus(): void {\n    this.reset(true, true);\n  }\n\n  public onKeyDown(event: KeyboardEvent): void {\n    if (!this.show) return;\n    switch (event.key) {\n      case 'ArrowDown': this.index += 1; if (this.index >= this.predictions.length) this.index = this.predictions.length - 1; break;\n      case 'ArrowUp': this.index -= 1; if (this.index < 0) this.index = 0; break;\n      case 'Escape': this.reset(true); break;\n      case 'Enter': this.index !== -1 ? this.onMouseDown(this.predictions[this.index]) : this.reset(true); break;\n    }\n  }\n\n  public onModelChange(input: string): void {\n    if (!input) { this.reset(); return; }\n    const request = Object.assign({ input }, this.ngxGooglePlacesAutocompleteConfig.options);\n    this.service.getPlacePredictions(request, (predictions: Prediction[], status: google.maps.places.PlacesServiceStatus) => {\n      if (status !== google.maps.places.PlacesServiceStatus.OK) { this.reset(); return; }\n      this.predictions = predictions;\n      this.show = true;\n      this.changeDetectorRef.detectChanges();\n    });\n  }\n\n  public onMouseDown(prediction: Prediction, event?: MouseEvent): void {\n    this.control.setValue(prediction.description, { emitViewToModelChange: false });\n    if (event) this.dispatchEvent(event);\n    this.reset(true);\n  }\n\n  private dispatchEvent(event: MouseEvent): void {\n    let customEvent: CustomEvent;\n    if (window.CustomEvent) {\n      customEvent = new CustomEvent('submit', { bubbles: true, cancelable: true, detail: event });\n    } else {\n      customEvent = document.createEvent('CustomEvent');\n      customEvent.initCustomEvent('submit', true, true, { data: event });\n    }\n    this.elementRef.nativeElement.firstElementChild.firstElementChild.form.dispatchEvent(customEvent);\n  }\n\n  private async initialize(): Promise<void> {\n    if (window.google?.maps) return new Promise((resolve) => resolve());\n    return new Promise((resolve, reject) => {\n      window['ngxGooglePlacesAutocompleteCallback'] = () => { this.scriptLoaded.emit(true); resolve(); };\n      const script = document.createElement('script');\n      script.async = true;\n      script.defer = true;\n      script.onerror = (err) => reject(err);\n      script.src = `https://maps.googleapis.com/maps/api/js?callback=ngxGooglePlacesAutocompleteCallback&key=${this.ngxGooglePlacesAutocompleteConfig.key}&language=${this.ngxGooglePlacesAutocompleteConfig.language}&libraries=${this.ngxGooglePlacesAutocompleteConfig.libraries}&region=${this.ngxGooglePlacesAutocompleteConfig.region}`;\n      script.type = 'text/javascript';\n      document.body.appendChild(script);\n    });\n  }\n\n  private reset(keep: boolean = false, show: boolean = false): void {\n    this.index = -1;\n    if (!keep) this.predictions = [];\n    this.show = show && this.predictions.length > 0;\n  }\n}","import { Pipe, PipeTransform } from '@angular/core';\n\nimport { Prediction } from './ngx-google-places-autocomplete.models';\n\n@Pipe({ name: 'highlight' })\nexport class NgxGooglePlacesAutocompletePipe implements PipeTransform {\n  public transform(predictions: Prediction[]): Prediction[] {\n    for (const prediction of predictions) {\n      prediction.innerHTML = prediction.description;\n      for (let i = 0; i < prediction.matched_substrings?.length; i += 1) {\n        const offset = prediction.matched_substrings[i].offset + i * 17;\n        const length = prediction.matched_substrings[i].length + offset;\n        prediction.innerHTML =\n          `${prediction.innerHTML.slice(0, offset)}<strong>${prediction.innerHTML.slice(offset, length)}</strong>${prediction.innerHTML.slice(length)}`;\n      }\n    }\n    return predictions;\n  }\n}","import { CommonModule } from '@angular/common';\nimport { ModuleWithProviders, NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { NgxGooglePlacesAutocompleteComponent } from './ngx-google-places-autocomplete.component';\nimport { NGX_GOOGLE_PLACES_AUTOCOMPLETE_CONFIG, NgxGooglePlacesAutocompleteConfig } from './ngx-google-places-autocomplete.config';\nimport { NgxGooglePlacesAutocompletePipe } from './ngx-google-places-autocomplete.pipe';\n\n@NgModule({\n  declarations: [NgxGooglePlacesAutocompleteComponent, NgxGooglePlacesAutocompletePipe],\n  exports: [NgxGooglePlacesAutocompleteComponent],\n  imports: [CommonModule, ReactiveFormsModule]\n})\nexport class NgxGooglePlacesAutocompleteModule {\n  public static forRoot(ngxGooglePlacesAutocompleteConfig: NgxGooglePlacesAutocompleteConfig): ModuleWithProviders<NgxGooglePlacesAutocompleteModule> {\n    return {\n      ngModule: NgxGooglePlacesAutocompleteModule,\n      providers: [{ provide: NGX_GOOGLE_PLACES_AUTOCOMPLETE_CONFIG, useValue: ngxGooglePlacesAutocompleteConfig }]\n    };\n  }\n}","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {NgxGooglePlacesAutocompleteControlValueAccessor as ɵa} from './lib/ngx-google-places-autocomplete.control-value-accessor';\nexport {NgxGooglePlacesAutocompletePipe as ɵb} from './lib/ngx-google-places-autocomplete.pipe';"],"names":[],"mappings":"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"}